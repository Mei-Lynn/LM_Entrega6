<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quizz</title>
    <link rel="stylesheet" href="quizz.css">
</head>

<body>
    <div id="gameStarter">
        <button onclick="gameStart()">Inicia el juego</button>
    </div>

    <div id="temporizador"> <!--Separar en 2 parrafos para que no se mueva el tiempo-->
        <p>Tiempo restante: 0 segundos</p>
    </div>

    <div id="cuestionario">
        <div id="pregunta">
            <p id="q">Pregunta Placeholder</p>
        </div>
        <div id="respuestas">
            <p class="ans">Respuesta placeholder</p>
            <p class="ans">Respuesta placeholder</p>
            <p class="ans">Respuesta placeholder</p>
            <p class="ans">Respuesta placeholder</p>
        </div>
    </div>


    <script>
        //Array de preguntas.
        //Formato: [{q: "Pregunta", a: ["r1","r2","r3","r4"]}, ...]
        preguntas = [
            {
                q:"Pregunta 1",
                a:[
                    "Respuesta 1",
                    "Respuesta 2",
                    "Respuesta 3",
                    "Respuesta 4"
                ]
            },
            {
                q:"Pregunta 2",
                a:[
                    "Respuesta 1",
                    "Respuesta 2",
                    "Respuesta 3",
                    "Respuesta 4"
                ]
            }
        ]

        function gameStart(){
            document.getElementById("gameStarter").style.display="none" //Esconder el boton
            nextQuestion() //Pon la primera pregunta
            showQuestions() //Muestra las preguntas
            
            startTimer() //Inicia el temporizador
            
            
        }

        function showQuestions(){
            document.getElementById("cuestionario").style.display="block"
        }

        function hideQuestions(){
            document.getElementById("cuestionario").style.display="none"
        }

        function nextQuestion() {
            qTarget = document.getElementById("pregunta")
            aTarget = document.getElementById("respuestas")

            qTarget.innerHTML = preguntas[currQuestion].q
            aTarget.innerHTML = 
            "<p class='ans'> "+preguntas[currQuestion].a[0]+" </p>" +
            "<p class='ans'> "+preguntas[currQuestion].a[1]+" </p>" +
            "<p class='ans'> "+preguntas[currQuestion].a[2]+" </p>" +
            "<p class='ans'> "+preguntas[currQuestion].a[3]+" </p>" ;

            currQuestion++
            console.log("Se ha cargado la pregunta " +currQuestion)
        }

        function startTimer() {
            contarSegundo() //Inicia el temporizador
            timer = setInterval(contarSegundo, 1000); //Cuenta cada segundo
        }

        function contarSegundo() {
            target = document.getElementById("temporizador");
            target.innerHTML = "<p>Tiempo restante: "+timeLeft+" segundos</p>"
            timeLeft--

            if (timeLeft < 0) { //Detiene el temporizador si llega a 0
                clearInterval(timer)
                setTimeout(hideQuestions, 500) //Esconde las preguntas con un poco de tiempo de gracia
                timeLeft = 5 //Reinicia el tiempo restante
            }
        }

        //_____________Variables______________
            currQuestion = 0
            timeLeft = 5
        //____________________________________
        
    </script>
</body>

</html>